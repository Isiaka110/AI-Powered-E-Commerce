{% extends 'base.html' %}
{% block content %}
<section class="max-w-6xl mx-auto px-6 py-12">
  <h1 class="text-5xl font-semibold text-brand-700">{{ store.store_name|default:'AgriConnect' }}</h1>

  {% if step == 'role' %}
  <div class="max-w-3xl mx-auto mt-14 bg-white border border-gray-200 rounded-2xl p-8 md:p-10">
    <h2 class="text-4xl font-semibold text-center">Please choose your role</h2>
    <p class="text-center text-gray-600 mt-3">Select how you want to use the platform.</p>
    <form method="POST" class="mt-8 space-y-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="choose_role">
      <label class="block border rounded-xl px-5 py-4 cursor-pointer hover:border-brand-500 transition">
        <input type="radio" name="role" value="farmer" class="mr-3" {% if selected_role == 'farmer' %}checked{% endif %}> As a Farmer
      </label>
      <label class="block border rounded-xl px-5 py-4 cursor-pointer hover:border-brand-500 transition">
        <input type="radio" name="role" value="buyer" class="mr-3" {% if selected_role == 'buyer' %}checked{% endif %}> As a Buyer
      </label>
      <label class="block border rounded-xl px-5 py-4 cursor-pointer hover:border-brand-500 transition">
        <input type="radio" name="role" value="logistics" class="mr-3" {% if selected_role == 'logistics' %}checked{% endif %}> As Logistics
      </label>
      <button class="w-full bg-brand-500 text-white rounded-xl py-3 font-semibold hover:bg-brand-600 mt-4">Continue</button>
    </form>
  </div>
  {% else %}
  <h2 class="text-4xl font-semibold mt-10">Complete your profile</h2>
  <p class="text-gray-600 mt-2">Role selected: <span class="font-semibold text-gray-900 capitalize">{{ selected_role }}</span>. Complete these quick steps to activate your workflow.</p>

  <div class="mt-8 bg-white border border-gray-200 rounded-2xl p-8 md:p-10 grid md:grid-cols-12 gap-8">
    <aside class="md:col-span-4 border-r border-gray-200 pr-4 space-y-8">
      <div><span class="inline-flex h-10 w-10 rounded-full items-center justify-center {% if step == '1' %}bg-brand-500 text-white{% else %}bg-brand-100 text-brand-700{% endif %} font-semibold">1</span><h3 class="text-3xl font-medium mt-3">Basic Information</h3><p class="text-gray-500">Submit your business name and contact.</p></div>
      <div><span class="inline-flex h-10 w-10 rounded-full items-center justify-center {% if step == '2' %}bg-brand-500 text-white{% else %}bg-gray-100 text-gray-700{% endif %} font-semibold">2</span><h3 class="text-3xl font-medium mt-3">Storefront</h3><p class="text-gray-500">Use your generated link to start trading.</p></div>
    </aside>

    <div class="md:col-span-8">
      {% if step == '1' %}
      <h3 class="text-4xl font-semibold">Basic Information</h3>
      <form method="post" class="space-y-5 mt-6">
        {% csrf_token %}
        <div>
          <label class="block font-semibold mb-2">Business Name</label>
          {{ form.business_name }}
        </div>
        <div>
          <label class="block font-semibold mb-2">Phone Number</label>
          {{ form.contact_phone }}
        </div>
        <div class="flex justify-between pt-4">
          <a href="{% url 'landing' %}" class="px-6 py-3 rounded-xl border border-gray-300 text-gray-700 font-semibold">Cancel</a>
          <button class="px-8 py-3 rounded-xl bg-brand-500 text-white font-semibold hover:bg-brand-600">Next</button>
        </div>
      </form>
      {% else %}
      <h3 class="text-4xl font-semibold">Storefront Ready</h3>
      <p class="text-gray-600 mt-3">Your premium storefront has been provisioned for role-based operations.</p>
      <div class="mt-5 bg-brand-50 border border-brand-200 rounded-xl p-4 text-brand-900 font-semibold">{{ request.get_host }}/{{ profile.storefront_slug }}</div>
      <div class="mt-6 flex flex-wrap gap-3">
        <a href="{% url 'owner_dashboard' %}" class="px-6 py-3 rounded-xl bg-brand-500 text-white font-semibold">Open Command Center</a>
        <a href="{% url 'dashboard' %}" class="px-6 py-3 rounded-xl border border-gray-300 font-semibold">Preview Marketplace</a>
      </div>
      {% endif %}
    </div>
  </div>
  {% endif %}
</section>

<style>
  #id_business_name, #id_contact_phone {
    width: 100%;
    border: 1px solid #d1d5db;
    border-radius: 0.75rem;
    padding: 0.75rem 0.9rem;
    font-size: 1rem;
  }
  #id_business_name:focus, #id_contact_phone:focus {
    outline: none;
    border-color: #45b649;
    box-shadow: 0 0 0 3px rgba(69,182,73,0.12);
  }
</style>
{% endblock %}
